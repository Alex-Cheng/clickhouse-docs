# This workflow uses the method described at:
# https://vercel.com/docs/concepts/deployments/deploy-hooks
#
# In the `on:` section a schedule is set to catch any merged docs
# in the ClickHouse/ClickHouse repo.  It also can be triggered by
# sending a dispatch "event" named `build_docs`.  This event can be
# sent from another repo. For example the event could be sent
# from the repo that houses our API when the API is updated and new
# swagger docs need to be built.
#
# There is also a workflow_dispatch, which means you can trigger
# the workflow from the GitHub Actions page.
 
name: Trigger docs website build on schedule
on: 
  schedule:
    - cron: '30 22 * * *'
  repository_dispatch:
    types: [build_docs]
  workflow_dispatch:

jobs:
  build:
    name: Trigger production build in Vercel
    runs-on: ubuntu-latest
    steps:
      - name: Trigger build of docs website
        run: curl -X POST ${{ secrets.VERCEL_DOC_BUILD }}
